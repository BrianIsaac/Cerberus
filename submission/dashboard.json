{
  "title": "Ops Assistant Health",
  "description": "Comprehensive health dashboard for Ops Assistant with throughput, latency, errors, autonomy, quality, and outcome metrics",
  "widgets": [
    {
      "id": 0,
      "definition": {
        "type": "group",
        "title": "Application Health",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1,
            "definition": {
              "type": "timeseries",
              "title": "Request Volume",
              "requests": [
                {
                  "q": "sum:trace.http.request.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "dog_classic"
                  }
                }
              ]
            }
          },
          {
            "id": 2,
            "definition": {
              "type": "timeseries",
              "title": "P95 Request Latency",
              "requests": [
                {
                  "q": "p95:trace.http.request.duration{service:ops-assistant}",
                  "display_type": "line"
                }
              ],
              "markers": [
                {
                  "value": "y = 10",
                  "display_type": "error dashed",
                  "label": "SLO Threshold (10s)"
                }
              ]
            }
          },
          {
            "id": 3,
            "definition": {
              "type": "query_value",
              "title": "Error Rate (%)",
              "requests": [
                {
                  "q": "sum:trace.http.request.errors{service:ops-assistant}.as_count() / sum:trace.http.request.hits{service:ops-assistant}.as_count() * 100",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 1,
                      "palette": "white_on_red"
                    },
                    {
                      "comparator": "<=",
                      "value": 1,
                      "palette": "white_on_green"
                    }
                  ]
                }
              ]
            }
          },
          {
            "id": 4,
            "definition": {
              "type": "timeseries",
              "title": "Gemini LLM Latency (P95)",
              "requests": [
                {
                  "q": "p95:trace.google_genai.request{service:ops-assistant}",
                  "display_type": "line"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 10,
      "definition": {
        "type": "group",
        "title": "Governance & Autonomy",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 11,
            "definition": {
              "type": "timeseries",
              "title": "Gemini LLM Calls Over Time",
              "requests": [
                {
                  "q": "sum:trace.google_genai.request.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "dog_classic"
                  }
                }
              ]
            }
          },
          {
            "id": 12,
            "definition": {
              "type": "timeseries",
              "title": "LangGraph Workflow Calls",
              "requests": [
                {
                  "q": "sum:trace.langgraph.request.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "cool"
                  }
                }
              ]
            }
          },
          {
            "id": 13,
            "definition": {
              "type": "timeseries",
              "title": "Gemini LLM Latency (avg vs P95)",
              "requests": [
                {
                  "q": "avg:trace.google_genai.request{service:ops-assistant}",
                  "display_type": "line"
                },
                {
                  "q": "p95:trace.google_genai.request{service:ops-assistant}",
                  "display_type": "line"
                }
              ]
            }
          },
          {
            "id": 14,
            "definition": {
              "type": "timeseries",
              "title": "LangGraph Errors",
              "requests": [
                {
                  "q": "sum:trace.langgraph.request.errors{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "warm"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 20,
      "definition": {
        "type": "group",
        "title": "MCP Tools Performance",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 21,
            "definition": {
              "type": "timeseries",
              "title": "MCP Tool Invocations",
              "requests": [
                {
                  "q": "sum:trace.mcp.request.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "dog_classic"
                  }
                }
              ]
            }
          },
          {
            "id": 22,
            "definition": {
              "type": "timeseries",
              "title": "MCP Tool Latency (avg vs P95)",
              "requests": [
                {
                  "q": "avg:trace.mcp.request{service:ops-assistant}",
                  "display_type": "line"
                },
                {
                  "q": "p95:trace.mcp.request{service:ops-assistant}",
                  "display_type": "line"
                }
              ]
            }
          },
          {
            "id": 23,
            "definition": {
              "type": "query_value",
              "title": "MCP Error Rate (%)",
              "requests": [
                {
                  "q": "sum:trace.mcp.request.errors{service:ops-assistant}.as_count() / sum:trace.mcp.request.hits{service:ops-assistant}.as_count() * 100",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 10,
                      "palette": "white_on_red"
                    },
                    {
                      "comparator": "<=",
                      "value": 10,
                      "palette": "white_on_yellow"
                    },
                    {
                      "comparator": "<=",
                      "value": 1,
                      "palette": "white_on_green"
                    }
                  ]
                }
              ]
            }
          },
          {
            "id": 24,
            "definition": {
              "type": "query_value",
              "title": "MCP Apdex Score",
              "requests": [
                {
                  "q": "avg:trace.mcp.request.apdex{service:ops-assistant}",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 0.9,
                      "palette": "white_on_green"
                    },
                    {
                      "comparator": "<=",
                      "value": 0.9,
                      "palette": "white_on_yellow"
                    },
                    {
                      "comparator": "<=",
                      "value": 0.7,
                      "palette": "white_on_red"
                    }
                  ]
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 30,
      "definition": {
        "type": "group",
        "title": "Quality Evaluations",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 31,
            "definition": {
              "type": "timeseries",
              "title": "RAGAS Faithfulness Score",
              "requests": [
                {
                  "q": "avg:ops_assistant.agent.quality.ragas_faithfulness{*}",
                  "display_type": "line"
                }
              ],
              "markers": [
                {
                  "value": "y = 0.7",
                  "display_type": "error dashed",
                  "label": "Minimum Acceptable"
                }
              ]
            }
          },
          {
            "id": 32,
            "definition": {
              "type": "timeseries",
              "title": "RAGAS Answer Relevancy Score",
              "requests": [
                {
                  "q": "avg:ops_assistant.agent.quality.ragas_answer_relevancy{*}",
                  "display_type": "line"
                }
              ],
              "markers": [
                {
                  "value": "y = 0.7",
                  "display_type": "error dashed",
                  "label": "Minimum Acceptable"
                }
              ]
            }
          },
          {
            "id": 33,
            "definition": {
              "type": "timeseries",
              "title": "RAGAS Evaluation Calls",
              "requests": [
                {
                  "q": "sum:trace.dd_ragas.faithfulness.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "dog_classic"
                  }
                }
              ]
            }
          },
          {
            "id": 34,
            "definition": {
              "type": "timeseries",
              "title": "Intake Confidence Score",
              "requests": [
                {
                  "q": "avg:ops_assistant.agent.quality.intake_confidence{*}",
                  "display_type": "line"
                }
              ],
              "markers": [
                {
                  "value": "y = 0.7",
                  "display_type": "warning dashed",
                  "label": "Confidence Threshold"
                }
              ]
            }
          },
          {
            "id": 35,
            "definition": {
              "type": "timeseries",
              "title": "Synthesis Confidence Score",
              "requests": [
                {
                  "q": "avg:ops_assistant.agent.quality.synthesis_confidence{*}",
                  "display_type": "line"
                }
              ],
              "markers": [
                {
                  "value": "y = 0.7",
                  "display_type": "warning dashed",
                  "label": "Confidence Threshold"
                }
              ]
            }
          },
          {
            "id": 36,
            "definition": {
              "type": "timeseries",
              "title": "OpenAI Evaluation API Calls",
              "requests": [
                {
                  "q": "sum:trace.openai.request.hits{service:ops-assistant}.as_count()",
                  "display_type": "bars",
                  "style": {
                    "palette": "cool"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 50,
      "definition": {
        "type": "group",
        "title": "Operations & Actionable Items",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 51,
            "definition": {
              "type": "manage_status",
              "title": "Monitor Status Panel",
              "summary_type": "monitors",
              "display_format": "countsAndList",
              "query": "service:ops-assistant"
            }
          },
          {
            "id": 52,
            "definition": {
              "type": "event_stream",
              "title": "Active Incidents & Cases",
              "query": "sources:incident,case service:ops-assistant",
              "event_size": "s"
            }
          },
          {
            "id": 53,
            "definition": {
              "type": "trace_service",
              "title": "Worst Traces (Highest Latency)",
              "service": "ops-assistant",
              "span_name": "http.request",
              "env": "production",
              "display_format": "three_column",
              "show_breakdown": true,
              "show_distribution": true,
              "show_errors": true,
              "show_hits": true,
              "show_latency": true,
              "show_resource_list": true,
              "size_format": "large"
            }
          }
        ]
      }
    }
  ],
  "layout_type": "ordered",
  "template_variables": [
    {
      "name": "env",
      "default": "production",
      "prefix": "env"
    },
    {
      "name": "service",
      "default": "ops-assistant",
      "prefix": "service"
    }
  ]
}
